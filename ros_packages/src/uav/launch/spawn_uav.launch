<?xml version="1.0"?>
<launch>
	<!-- stationplein -->
    <env name="PX4_HOME_LAT" value="51.923345" />
    <env name="PX4_HOME_LON" value="4.470345" />
    <env name="PX4_HOME_ALT" value="488.0" />
    
    <!-- START THE AUTOPILOT -->
    <include file="$(find px4)/launch/px4.launch"></include>
    <include file="$(find uav)/launch/start_mavros.launch"></include>    
    
    <!-- ADD POSE FOR UAV -->
    <arg name="x" default="0"/>
    <arg name="y" default="0"/>
    <arg name="z" default="0.3"/>
    <arg name="roll" default="0"/>
    <arg name="pitch" default="0"/>
    <arg name="yaw" default="0"/>
    
    <arg name="uav_model" default="iris_camera"/> <!--uses iris model from px4 firmware package and adds a ros usb_cam--> <!-- iris,iris_camera, iris_opt_flow, iris_rplida, solo, typhoon_h480 -->
    <node name="spawn_uav" pkg="gazebo_ros" type="spawn_model" args="-file $(find uav)/gazebo_model/models/$(arg uav_model)/$(arg uav_model).sdf -sdf -model $(arg uav_model) -x $(arg x) -y $(arg y) -z $(arg z) -R $(arg roll) -P $(arg pitch) -Y $(arg yaw)" /> 
    
       
    <!--<node name="FramesPublisher" pkg="uav" type="FramesPublisher.py" output="screen" respawn="true"></node>-->
    <node pkg="tf" type="static_transform_publisher" name="static_tf_broadcaster" args="0 0 0 -1.57079632679 0 3.14159265359 base_link usb_camera::camera_link 100" />
    <node pkg="tf" type="static_transform_publisher" name="static_tf_broadcaster_fcu" args="0 0 0 0 0 3.14159265359 fcu_frd fcu 100" />
    <node name="rviz_uav" pkg="rviz" type="rviz" output="screen" args="-d $(find uav)/cfg/config.rviz" />
    
    
    <!-- ADD AR TRACK FOLLOWING -->
    <!--<include file="$(find uav)/launch/start_ar_track_alvar.launch"></include>  -->
    

</launch>
